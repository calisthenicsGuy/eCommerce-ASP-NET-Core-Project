@model ProductDetailsModel

@{
    ViewData["Title"] = $"{Model.Name} | Details";
}


<div class="section">
    <div class="container">
        <div class="row">
            <partial name="_ProductImagesPartial" model="Model.Images" />

            <div class="col-md-5">
                <div class="product-details">
                    <h2 class="product-name">product name goes here</h2>
                    <div>
                        @if (Model.AverageReview != -1)
                        {
                            <div class="product-rating">
                                @for (int i = 1; i <= Model.AverageReview; i++)
                                {
                                    <i class="fa fa-star"></i>
                                }
                                @for (int i = 1; i <= 5 - Model.AverageReview; i++)
                                {
                                    <i class="fa fa-star-o"></i>
                                }
                            </div>
                            <span class="badge badge-secondary">
                                @Model.TotalReviews Review(s) |
                                <a role="button" @*class="btn btn-neutral"*@ id="addReview">Add your review</a>
                            </span>
                        }
                        else
                        {
                            <span class="badge badge-secondary">
                                There are no reviews.
                                <a role="button" @*class="btn btn-neutral"*@ id="addReview">Be first by adding your review</a>
                            </span>
                        }

                    </div>
                    <div>
                        <h3 class="product-price">@Model.Price</h3>
                        <span class="product-available">@Model.Status</span>
                    </div>
                    <p>@Html.Raw(@Model.SanitizedDescription)</p>

                    <div class="product-options">
                        <label>
                            Size
                            <select class="input-select">
                                <option value="0">X</option>
                            </select>
                        </label>
                        <label>
                            Color
                            <select class="input-select">
                                <option value="0">Red</option>
                            </select>
                        </label>
                    </div>

                    <div class="add-to-cart">
                        <div class="qty-label">
                            Qty
                            <div class="input-number">
                                <input type="number">
                                <span class="qty-up">+</span>
                                <span class="qty-down">-</span>
                            </div>
                        </div>
                        <button class="add-to-cart-btn"><i class="fa fa-shopping-cart"></i> add to cart</button>
                    </div>

                    <a id="addProductToWishlist" role="button" class="badge badge-secondary"><i class="fa fa-heart"></i> Add to wishlist</a>
                    <a id="removeProductToWishlist" role="button" class="badge badge-secondary d-none"><i class="fa fa-heart"></i> Add to wishlist</a>
                    <span class="badge badge-secondary">Category: <a role="button">Model.Category</a></span>

                    <ul class="product-links">
                        <li>Share:</li>
                        <li><a href="#"><i class="fab fa-facebook"></i></a></li>
                        <li><a href="#"><i class="fab fa-twitter"></i></a></li>
                        <li><a href="#"><i class="fab fa-google-plus"></i></a></li>
                        <li><a href="#"><i class="fab fa-envelope"></i></a></li>
                    </ul>
                </div>
            </div>
        </div>
    </div>

    <partial name="_AddReviewPartial" model="@Model.AddProductReviewModel" />

    <div class="section">
        <div class="container">
            <div class="row">

                <div class="col-md-12">
                    <div class="section-title text-center">
                        <h3 class="title">Related Products</h3>
                    </div>
                </div>

                @*<partial name="_ProductCardPartial" model="@Model.RelatedProducts"/>*@

                <div class="clearfix visible-sm visible-xs"></div>
            </div>
        </div>
    </div>



    @section Scripts {
        <script>
            new Glider(document.querySelector('.glider'), {
                slidesToShow: 1,
                slidesToScroll: 1,
                draggable: true,
                dots: '.dots',
                arrows: {
                    prev: '.glider-prev',
                    next: '.glider-next'
                }
            });
        </script>

        <script>
            const wishlistButtonElement = document.querySelector("#wishlist");

            wishlistButtonElement.addEventListener("click", (e) => {
                $.get('/api/ApplicationUsersApi/AddProductToUserWishlist?ProductId=' + @Model.Id, (data) => {

                })
            });
        </script>
    }
